<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Python IO 优化</title>
    <link href="/2023/03/23/python_IO_%E4%BC%98%E5%8C%96/"/>
    <url>/2023/03/23/python_IO_%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>python IO 优化</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e7</span>))<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br><span class="hljs-built_in">print</span> = sys.stdout.write<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>python, IO, 优化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>裁剪序列 (线段树优化Dp) From 算法进阶指南</title>
    <link href="/2023/03/23/%E7%AE%97%E6%B3%95%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97_%E8%A3%81%E5%89%AA%E5%BA%8F%E5%88%97/"/>
    <url>/2023/03/23/%E7%AE%97%E6%B3%95%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97_%E8%A3%81%E5%89%AA%E5%BA%8F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<p>线段树优化dp</p><span id="more"></span><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="https://www.acwing.com/problem/content/description/301/">https://www.acwing.com/problem/content/description/301/</a></p><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>$~~~~$给定一个长度为 $N$ 的序列 $A$，要求把该序列分成若干段，在满足每段中所有数的和不超过 $M$ 的前提下，让每段中所有数的最大值之和最小。<br>$~~~~$试计算这个最小值。</p><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>$~~~~$考虑 $DP$。<br>$~~~~$设状态：<br>$$<br>f[i]：前 i 个数中每段中所有数的最大值之和的最小值， i \in [1, n]<br>$$<br>$~~~~$ 对于 $i$，枚举它转移的上一个答案 $f[j]$，更新为 $i$ 前面的若干个数（满足 $\sum_{k&#x3D;j+1}^{i} a[k] &lt;&#x3D; M$）中的最大值，取最小值。<br>$~~~~$ 即状态转移方程为：<br>$$<br>f[i] &#x3D; \min{f[j] + \max{a[j+1], a[j+2], …, a[i]}}, 其中j \in [1, i], \sum_{k&#x3D;j+1}^{i} a[k] &lt;&#x3D; M<br>$$<br>$~~~~$ 注意到<br>$$<br>\max{a[i]} &lt;&#x3D; \max{a[i], a[i-1]} &lt;&#x3D; … &lt;&#x3D; \max{a[j+1], a[j+2], …, a[i]}<br>$$<br>$~~~~$ 因此对于每一个 $i$，可以用单调栈找到  $&gt;a[i]$ 的第一个数 $a[pre[i]]$，维护 $i$ 之前 $\le a[i]$ 的一段连续的区间 $[pre[i]+1, i]$，这段区间的最大值即为 $a[i]$。<br>$~~~~$ 考虑线段树优化，对于 $i$，由于 $f[i]$ 是固定的，因此  </p><ul><li>将 $f[i]$ 赋给线段树的第 $i$ 位  </li><li>在由单调栈维护出来的区间 $[pre[i]+1, i]$ 加上 $a[i]$  </li><li>使用二分找到满足 $\sum_{k&#x3D;j+1}^{i} a[k] &lt;&#x3D; M$ 的 $j$  </li><li>$f[i] &#x3D; query(j+1, i)$</li></ul><h2 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br>sys.setrecursionlimit(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e7</span>))<br><span class="hljs-built_in">input</span> = sys.stdin.readline<br><span class="hljs-built_in">print</span> = sys.stdout.write<br>n, L = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>inf = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e18</span>)<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, l=<span class="hljs-number">0</span>, r=<span class="hljs-number">0</span>, v=inf, mn=inf, add=inf</span>):<br>        self.l, self.r, self.v, self.mn, self.add = l, r, v, mn, add<br>tr = [Node() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span>)&lt;&lt;<span class="hljs-number">2</span>)]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">ls</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">return</span> u &lt;&lt; <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">rs</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">return</span> u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mid</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">return</span> tr[u].l + tr[u].r &gt;&gt; <span class="hljs-number">1</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">u, l, r</span>):<br>    tr[u] = Node(l, r)<br>    <span class="hljs-keyword">if</span> l == r:<br>        <span class="hljs-keyword">return</span><br>    build(ls(u), l, mid(u))<br>    build(rs(u), mid(u)+<span class="hljs-number">1</span>, r)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pushup</span>(<span class="hljs-params">u</span>):<br>    tr[u].mn = <span class="hljs-built_in">min</span>(tr[ls(u)].mn, tr[rs(u)].mn)<br>    tr[u].v = <span class="hljs-built_in">min</span>(tr[ls(u)].v, tr[rs(u)].v)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pushdown</span>(<span class="hljs-params">u</span>):<br>    <span class="hljs-keyword">if</span> tr[u].add != inf:<br>        tr[ls(u)].mn = tr[ls(u)].v + tr[u].add<br>        tr[rs(u)].mn = tr[rs(u)].v + tr[u].add<br>        tr[ls(u)].add = tr[u].add<br>        tr[rs(u)].add = tr[u].add<br>        tr[u].add = inf<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">change</span>(<span class="hljs-params">u, x, v</span>):<br>    <span class="hljs-keyword">if</span> tr[u].l == tr[u].r:<br>        tr[u].mn = inf<br>        tr[u].v = v<br>        <span class="hljs-keyword">return</span><br>    pushdown(u)<br>    <span class="hljs-keyword">if</span> x &lt;= mid(u):<br>        change(ls(u), x, v)<br>    <span class="hljs-keyword">else</span>:<br>        change(rs(u), x, v)<br>    pushup(u)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">u, l, r, v</span>):<br>    <span class="hljs-keyword">if</span> l &lt;= tr[u].l <span class="hljs-keyword">and</span> tr[u].r &lt;= r:<br>        tr[u].mn = tr[u].v + v<br>        tr[u].add = v<br>        <span class="hljs-keyword">return</span><br>    pushdown(u)<br>    <span class="hljs-keyword">if</span> l &lt;= mid(u):<br>        update(ls(u), l, r, v)<br>    <span class="hljs-keyword">if</span> r &gt; mid(u):<br>        update(rs(u), l, r, v)<br>    pushup(u)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">u, l, r</span>):<br>    <span class="hljs-keyword">if</span> l &lt;= tr[u].l <span class="hljs-keyword">and</span> tr[u].r &lt;= r:<br>        <span class="hljs-keyword">return</span> tr[u].mn<br>    res = inf<br>    pushdown(u)<br>    <span class="hljs-keyword">if</span> l &lt;= mid(u):<br>        res = <span class="hljs-built_in">min</span>(res, query(ls(u), l, r))<br>    <span class="hljs-keyword">if</span> r &gt; mid(u):<br>        res = <span class="hljs-built_in">min</span>(res, query(rs(u), l, r))<br>    <span class="hljs-keyword">return</span> res<br>h = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>sw = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    sw[i] = sw[i-<span class="hljs-number">1</span>] + h[i]<br>stk = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>top = <span class="hljs-number">1</span><br>stk[top] = <span class="hljs-number">1</span><br>pre = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">while</span> top &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> h[stk[top]] &lt;= h[i]:<br>        top -= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> top &gt; <span class="hljs-number">0</span>:<br>        pre[i] = stk[top]<br>    top += <span class="hljs-number">1</span><br>    stk[top] = i<br>f = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lower_bound</span>(<span class="hljs-params">l, r, x</span>):<br>    <span class="hljs-keyword">while</span> l &lt; r:<br>        mid = l + r &gt;&gt; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> sw[mid] &gt;= x:<br>            r = mid<br>        <span class="hljs-keyword">else</span>:<br>            l = mid + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> r<br>build(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>    change(<span class="hljs-number">1</span>, i, f[i-<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">if</span> pre[i] + <span class="hljs-number">1</span> &lt;= i:<br>        update(<span class="hljs-number">1</span>, pre[i] + <span class="hljs-number">1</span>, i, h[i])<br>    left = lower_bound(<span class="hljs-number">0</span>, i, sw[i] - L)<br>    <span class="hljs-keyword">if</span> left &lt; i:<br>        f[i] = query(<span class="hljs-number">1</span>, left+<span class="hljs-number">1</span>, i)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d\n&#x27;</span> % f[n])<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>裁剪序列, 算法进阶指南, 线段树, DP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nebius Welcome Round (Div. 1 + Div. 2) a - D</title>
    <link href="/2023/03/20/cf_1804/"/>
    <url>/2023/03/20/cf_1804/</url>
    
    <content type="html"><![CDATA[<p>A (思维) B (贪心) C (数论) D (贪心)</p><span id="more"></span><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="https://codeforces.com/contest/1804">https://codeforces.com/contest/1804</a></p><h2 id="A"><a href="#A" class="headerlink" title="A"></a>A</h2><h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$ 从 $(0, 0)$ 开始走，每次只能走上下左右四个方向，走一步，且方向和上一次不同，问走到 $(a, b)$ 最短步数。</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$ 一般地，将 $(0, 0)$ 和 $(a, b)(a &lt; b \ and \ a &gt; 0 \ and \ b &gt; 0)$ 视为长方形的两个顶点，则最优策略是从 $(0, 0)$ 走到 $(a, a)$，在从 $(a, a)$ 走到 $(a, b)$。<br>$~~~~$ 则答案为 $2 * (b - a) - 1$</p><h3 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    x, y = [<span class="hljs-built_in">abs</span>(<span class="hljs-built_in">int</span>(_)) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-keyword">if</span> x &gt; y:<br>        x, y = y, x<br>    res = <span class="hljs-number">2</span> * x<br>    <span class="hljs-keyword">if</span> y &gt; x:<br>        res+=<span class="hljs-number">2</span> * (y-x)-<span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><h2 id="B"><a href="#B" class="headerlink" title="B"></a>B</h2><h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$ 给出一些区间 $[t_{i}, t_{i}+w], t_{i} \le t_{i+1},i \in [1, n]$，要求使用数量最少的个区间 $[x, x+w]$，其中 $x$ 自定，使得所有的区间和 $[x, x+w]$ 有交集。</p><h3 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$ 考虑贪心。从前往后遍历 $t_{i}$，以 $t_{i} + w$ 作为左边界，$t_{i} + w+d$ 作为右边界，寻找和该区间相交的区间，直到下一个区间不再与该区间相交，则另起一个新的区间。</p><h3 id="python-代码-1"><a href="#python-代码-1" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br>T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n, k, d, w = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    a = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    right = -<span class="hljs-number">1</span><br>    res = <span class="hljs-number">0</span><br>    nowk = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">if</span> a[i] &lt;= right <span class="hljs-keyword">and</span> nowk:<br>            nowk -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            res += <span class="hljs-number">1</span><br>            right = a[i] + w + d<br>            nowk = k - <span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$ 找到一个 $f, f \in [1, p]$，使得 $(x + \frac{f * (f + 1)}{2}) % n &#x3D;&#x3D; 0$ 成立。</p><h3 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$ 上结论，<br>$$<br>\frac{(a * n + b) * (a * n + b + 1)}{2} \ % n &#x3D; (\frac{(a * n) * (a * n + 1)}{2} % n + \frac{b * (b + 1)}{2} % n) % n<br>$$<br>$~~~~$ 证明待补。<br>$~~~~$ 因此，$f &#x3D; a * n + b, b &lt; n$，枚举 $a$ 即可。</p><h3 id="python-代码-2"><a href="#python-代码-2" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> *<br>T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n, x, p = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    s = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>    mp = <span class="hljs-built_in">dict</span>()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        s[i] = i*(i+<span class="hljs-number">1</span>)//<span class="hljs-number">2</span> % n<br>        <span class="hljs-keyword">if</span> mp.__contains__(s[i]):<br>            mp[s[i]] = <span class="hljs-built_in">min</span>(mp[s[i]], i)<br>        <span class="hljs-keyword">else</span>:<br>            mp.update(&#123;s[i]: i&#125;)<br>    ok = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        now = (<span class="hljs-number">2</span>*n-s[n]*a%n-x)%n<br>        <span class="hljs-keyword">if</span> mp.__contains__(now) <span class="hljs-keyword">and</span> mp[now] + a*n &lt;= p:<br>            ok = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">if</span> ok:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;YES&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;NO&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="D"><a href="#D" class="headerlink" title="D"></a>D</h2><h3 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$ 给一个 $ n \times m , 4|m$ 的 $01$ 矩阵，对于每一行，满足两个连在一起的块数量和单个块的数量都为 $\frac{m}{4}$。<br>$~~~~$ 要求分配两种块的位置，使得至少有一个 $1$ 的块的数量最少或最多。</p><h3 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$ 显然每一行是独立的。记每一行 $1$ 的数量为 $ cnt1 $。<br>$~~~~$ 对于最小值，贪心的找每一行 $11$ 块数量 $ cnt11 $。  </p><ul><li>如果 $cnt11 \le \frac{m}{4}$，答案为 $cnt1 - 2 \times cnt11 + cnt11$   </li><li>如果 $cnt11 &gt; \frac{m}{4}$，答案为 $cnt1 - 2 \times \frac{m}{4} + \frac{m}{4}$</li></ul><p>$~~~~$ 对于最大值，贪心的找每一个不是 $11$ 块的数量 $cnt11n$。  </p><ul><li>如果 $cnt11 \le \frac{m}{4}$，则 $cnt11 &#x3D; \frac{m}{4} - cnt11n$，答案为 $cnt1 - 2 \times cnt11 + cnt11$   </li><li>如果 $cnt11 &gt; \frac{m}{4}$，则 $cnt11 &#x3D; \frac{m}{4} - cnt11n$, 答案为 $cnt1$</li></ul><h3 id="python-代码-3"><a href="#python-代码-3" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">n, m = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>mn, mx = <span class="hljs-number">0</span>, <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    s = <span class="hljs-built_in">input</span>()<br>    cnt1 = s.count(<span class="hljs-string">&#x27;1&#x27;</span>)<br>    x = <span class="hljs-number">0</span><br>    i = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> i &lt; m:<br>        <span class="hljs-keyword">if</span> i + <span class="hljs-number">1</span> &lt; m <span class="hljs-keyword">and</span> s[i] == <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">and</span> s[i+<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>:<br>            x += <span class="hljs-number">1</span><br>            i += <span class="hljs-number">1</span><br>        i += <span class="hljs-number">1</span><br>    mn += cnt1 - <span class="hljs-built_in">min</span>(m//<span class="hljs-number">4</span>, x)<br>    x = <span class="hljs-number">0</span><br>    i = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> i &lt; m:<br>        <span class="hljs-keyword">if</span> i + <span class="hljs-number">1</span> &lt; m <span class="hljs-keyword">and</span> (s[i] == <span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">or</span> s[i] != s[i+<span class="hljs-number">1</span>]):<br>            x += <span class="hljs-number">1</span><br>            i += <span class="hljs-number">1</span><br>        i += <span class="hljs-number">1</span><br>    mx += cnt1 - <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, (m//<span class="hljs-number">4</span> - x))<br><span class="hljs-built_in">print</span>(mn, mx)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>codeforce, cf, A, B, C, D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Educational Codeforces Round 143 (Rated for Div. 2) C - D</title>
    <link href="/2023/03/15/cf_1795/"/>
    <url>/2023/03/15/cf_1795/</url>
    
    <content type="html"><![CDATA[<p>C (二分) D (组合数学)</p><span id="more"></span><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="https://codeforces.com/contest/1795">https://codeforces.com/contest/1795</a></p><h2 id="C-二分"><a href="#C-二分" class="headerlink" title="C (二分)"></a>C (二分)</h2><h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$给两个数组 $a$, $b$，进行 $n$ 轮操作，对于第 $k$ 次操作，$\forall i \in [1, n-k+1], a[i] -&#x3D; min(b[i+k-1], a[i])$，对第 $i+k-1$ 个答案产生 $min(b[i+k-1], a[i])$ 的贡献。  </p><p>$~~~~$求出所有的答案。</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$反过来考虑每个 $a[i]$ 的贡献，对于 $b[j], j &gt;&#x3D; i$，它会对第 $j$ 个答案产生 $b[j]$ 的贡献，直到 $a[i] &lt;&#x3D; b[i] + b[i+1] + … + b[e]$ 未知，特别的， $a[i]$ 对第 $e$ 个答案产生的贡献为 $a[i] - b[i] - b[i+1] - … - b[e-1]$。  </p><p>$~~~~$因此我们可以先求出 $b$ 的前缀和 $sb$，要计算每个 $a[i]$ 的贡献，我们只需要在 $j \in [i, n]$ 范围二分找到 $sb[n] - sb[i-1] &gt;&#x3D; a[i]$ 的第一个数，即为 $e$。</p><h3 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">lower_bound</span>(<span class="hljs-params">num, left, right</span>):<br>    l, r = left, right<br>    <span class="hljs-keyword">while</span> l &lt; r:<br>        mid = (l + r) // <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> b[mid] &gt;= num:<br>            r = mid<br>        <span class="hljs-keyword">else</span>:<br>            l = mid + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> r<br><br><br>T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    b = [<span class="hljs-number">0</span>] + [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    c = b.copy()<br>    s = <span class="hljs-built_in">sum</span>(b)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(b)):<br>        b[i] += b[i - <span class="hljs-number">1</span>]<br>    f = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br>    g = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">2</span>)]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> a[i] + b[i-<span class="hljs-number">1</span>] &gt;= b[n]:<br>            f[i] += <span class="hljs-number">1</span><br>            f[n+<span class="hljs-number">1</span>] -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">continue</span><br>        pos = lower_bound(a[i] + b[i-<span class="hljs-number">1</span>], i, n)<br>        <span class="hljs-keyword">if</span> i != pos:<br>            f[i] += <span class="hljs-number">1</span><br>            f[pos] -= <span class="hljs-number">1</span><br>        g[pos] += a[i] + b[i-<span class="hljs-number">1</span>] - b[pos-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        f[i] += f[i-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d &#x27;</span> % (f[i] * c[i] + g[i]), end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h2 id="D-组合数学"><a href="#D-组合数学" class="headerlink" title="D (组合数学)"></a>D (组合数学)</h2><h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$给出每三个点一组的完全图（三个点两两相连），一共有 $\frac{n}{3} (6|n)$ 组，要求对所有节点染色，一共有两种颜色（红、蓝），最终的染色方案必须满足两种颜色数量相同。  </p><p>$~~~~$在每一组中，若两个点的颜色不同，则对答案的贡献为两个点的边权。要求计算使得答案最大的染色方案的数量。模 $998244353$。</p><h3 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$要使答案最大，只需从每个组中选出两个最大的边权对答案产生贡献即可，因此每个组中的颜色必然满足存在两个颜色相同，不妨设三中颜色分别为 $x ~ x ~ y, (x &gt;&#x3D; y)$，对于每一组，只要 $y$ 确定了，则 $x$ 也就确定了。      </p><p>$~~~~$因此考虑 $y$，要使两种颜色数量相同，只需平均分配即可，即从 $\frac{n}{3}$ 个组中选 $\frac{n}{6}$ 个染成红色，其他 $\frac{n}{6}$ 个染成蓝色。因此答案为 $C(\frac{n}{3}, \frac{n}{6}) % mod$。  </p><p>$~~~~$考虑一下特殊情况：  </p><ul><li>当某一组 $y$ 的数量为 $2$ 时，$y$ 的位置可以选择两个与 $x$ 交汇处之一，因此对答案贡献 $*2$  </li><li>当某一组 $y$ 的数量为 $2$ 时，$y$ 的位置可以选择任意两个点交汇处之一，因此对答案贡献 $*3$</li></ul><h3 id="python-代码-1"><a href="#python-代码-1" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e5</span>)<br>f = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">5</span>)]<br>inv = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N + <span class="hljs-number">5</span>)]<br>f[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span><br>mod = <span class="hljs-number">998244353</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, N + <span class="hljs-number">1</span>):<br>    f[i] = f[i - <span class="hljs-number">1</span>] * i % mod<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">qmi</span>(<span class="hljs-params">a, b</span>):<br>    res = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">while</span> b:<br>        <span class="hljs-keyword">if</span> b &amp; <span class="hljs-number">1</span>:<br>            res = res * a % mod<br>        a = a * a % mod<br>        b &gt;&gt;= <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> res<br><br><br>inv[N] = qmi(f[N], mod - <span class="hljs-number">2</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N - <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>    inv[i] = inv[i + <span class="hljs-number">1</span>] * (i + <span class="hljs-number">1</span>) % mod<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">n, m</span>):<br>    <span class="hljs-keyword">if</span> m &gt; n:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>    <span class="hljs-keyword">return</span> f[n] * inv[m] * inv[n - m] % mod<br><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>a = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>res = <span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, n, <span class="hljs-number">3</span>):<br>    b = a[i:i + <span class="hljs-number">3</span>]<br>    res = res * b.count(<span class="hljs-built_in">min</span>(b)) % mod<br><span class="hljs-built_in">print</span>(res * C(n//<span class="hljs-number">3</span>, n//<span class="hljs-number">6</span>) % mod)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>codeforce, cf, C, D, Educational Codeforces Round 143</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Codeforces Round 857 (Div. 2) C - E</title>
    <link href="/2023/03/14/cf_1802_C_E/"/>
    <url>/2023/03/14/cf_1802_C_E/</url>
    
    <content type="html"><![CDATA[<p>C (构造) D (贪心、multiset) E (树状数组优化dp)</p><span id="more"></span><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p><a href="https://codeforces.com/contest/1802">https://codeforces.com/contest/1802</a></p><h2 id="C-构造"><a href="#C-构造" class="headerlink" title="C (构造)"></a>C (构造)</h2><h3 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$构造一个 $n \times m$ 的矩阵，使得每一个 $2 \times 2$ 的子矩阵满足：<br>$$<br>\begin{matrix} A_{11} \oplus A_{12} \oplus A_{21} \oplus A_{22}&#x3D;A_{33}\oplus A_{34} \oplus A_{43} \oplus A_{44}<br> \A_{13} \oplus A_{14} \oplus A_{23} \oplus A_{24}&#x3D;A_{31}\oplus A_{32} \oplus A_{41} \oplus A_{42}<br>\end{matrix}<br>$$</p><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$通过观察样例，可以猜想每一个子矩阵的异或和是一个常数。（待证明）  </p><p>$~~~~$因此，我们可以随机化矩阵的第一行和第一列，并设定一个常数 $C$ 作为每个子矩阵的异或和。对于一个子矩阵，若已知三个数的值 $A_{1}, A_{2}, A_{3}$，则第四个值 $A_{4}&#x3D;C \oplus A_{1} \oplus A_{2} \oplus A_{3}$。</p><h3 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br>T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>mod = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">63</span>) - <span class="hljs-number">1</span><br>f = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">200</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">200</span>)]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">200</span>):<br>    f[i][<span class="hljs-number">0</span>] = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">100000000000000012</span>)<br>    f[<span class="hljs-number">0</span>][i] = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">100000000000000012</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">200</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">200</span>):<br>        f[i][j] = mod ^ f[i - <span class="hljs-number">1</span>][j] ^ f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] ^ f[i][j - <span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n, m = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-built_in">print</span>(n*m)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d &#x27;</span> % f[i][j], end=<span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h2 id="D-贪心、multiset"><a href="#D-贪心、multiset" class="headerlink" title="D (贪心、multiset)"></a>D (贪心、multiset)</h2><h3 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$给出两个数组 $a, b$，操作 $n$ 次，对于第 $i$ 次，每次只能从 $a_{i}、b_{i}$ 中选出一个，记从 $a$ 随选出的数列为 $a_{choose}$，从 $b$ 中选出的数列为 $b_{choose}$，目标是最小化 $\left | \max(a_{choose}) - \max(b_{choose}) \right | $。  </p><h3 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$将 $a, b$ 一起按照 $a$ 从大到小排序，从前往后遍历 $a$，对于 $a_{i}$，将其作为从 $a$ 中选出的最大值。  </p><p>$~~~~$由于 $\forall j \in [1,i-1], a_{j} &lt; a_{i}$，因此，$i$ 前面的 $a$ 一定不选，$i$ 前面的 $b$ 一定要选；$i$ 后面的 $b$ 可选可不选。  </p><p>$~~~~$记 $mxb &#x3D; \max(b_{j}, j \in [1,i-1])$ ，则只需要在 $i$ 后面的 $b$ 中找到和 $a_{i}$ 最相近的且 $&gt; mxb$ 的数 $b_{k}$ 即可用 $\left | a_{i} - b_{k} \right |$ 更新答案；如果没有找到，则用 $\left | a_{i} - mxb \right |$ 更新答案。  </p><p>$~~~~$可用 $muliset$ 维护，$lower_bound$ 用于寻找最相近的数。 </p><p>$~~~~$时间复杂度 $O(nlogn)$</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _for( i, L, R ) for ( int i = L; i &lt;= R; ++i )</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">5</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> a, b;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;( <span class="hljs-type">const</span> Node &amp; o ) <span class="hljs-type">const</span><br>&#123;<br><span class="hljs-keyword">return</span>(a &gt; o.a);<br>&#125;<br>&#125; e[N];<br><span class="hljs-type">int</span> n;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;n );<br>multiset&lt;<span class="hljs-type">int</span>&gt; s;<br>_for( i, <span class="hljs-number">1</span>, n ) <span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d%d&quot;</span>, &amp;e[i].a, &amp;e[i].b ), s.<span class="hljs-built_in">insert</span>( e[i].b );<br><span class="hljs-built_in">sort</span>( e + <span class="hljs-number">1</span>, e + n + <span class="hljs-number">1</span> );<br><span class="hljs-type">int</span> res = <span class="hljs-number">1e9</span>, mx = <span class="hljs-number">-1e9</span>;<br>_for( i, <span class="hljs-number">1</span>, n )<br>&#123;<br>s.<span class="hljs-built_in">erase</span>( s.<span class="hljs-built_in">find</span>( e[i].b ) );<br><span class="hljs-keyword">auto</span> it = s.<span class="hljs-built_in">lower_bound</span>( e[i].a );<br><span class="hljs-keyword">if</span> ( it != s.<span class="hljs-built_in">end</span>() <span class="hljs-keyword">and</span> * it &gt; mx )<br>res = <span class="hljs-built_in">min</span>( res, <span class="hljs-built_in">abs</span>( e[i].a - *it ) );<br><span class="hljs-keyword">if</span> ( it != s.<span class="hljs-built_in">begin</span>() <span class="hljs-keyword">and</span> * <span class="hljs-built_in">prev</span>( it ) &gt; mx )<br>res = <span class="hljs-built_in">min</span>( res, <span class="hljs-built_in">abs</span>( e[i].a - *<span class="hljs-built_in">prev</span>( it ) ) );<br>res= <span class="hljs-built_in">min</span>( res, <span class="hljs-built_in">abs</span>( e[i].a - mx ) );<br>mx= <span class="hljs-built_in">max</span>( e[i].b, mx );<br>&#125;<br><span class="hljs-built_in">printf</span>( <span class="hljs-string">&quot;%d\n&quot;</span>, res );<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> T;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;T );<br><span class="hljs-keyword">while</span> ( T-- )<br><span class="hljs-built_in">solve</span>();<br><span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>同时可用树状数组实现 $multiset$  </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _for(i, L, R) for (int i = L; i &lt;= R; ++i)</span><br><span class="hljs-comment">// #define int long long</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> tot, sz, INF;<br><span class="hljs-type">int</span> num[N], tr[N];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">pos</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">lower_bound</span>(num + <span class="hljs-number">1</span>, num + <span class="hljs-number">1</span> + sz, x) - num;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (x; x &lt;= sz; x += x &amp; -x)<br>tr[x] += k;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> tmp = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (x; x; x -= x &amp; -x)<br>tmp += tr[x];<br><span class="hljs-keyword">return</span> tmp;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kth</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> rs = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">25</span>; i &gt;= <span class="hljs-number">0</span>; --i)<br>&#123;<br>rs += (<span class="hljs-number">1</span> &lt;&lt; i);<br><span class="hljs-keyword">if</span> (rs &gt; sz || tr[rs] &gt;= x)<br>rs -= (<span class="hljs-number">1</span> &lt;&lt; i);<br><span class="hljs-keyword">else</span><br>x -= tr[rs];<br>&#125;<br><span class="hljs-keyword">return</span> num[rs + <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">int</span> n, a[N];<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Q</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> a, b;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> Q &amp;o) <span class="hljs-type">const</span><br>&#123;<br><span class="hljs-keyword">return</span> a &gt; o.a;<br>&#125;<br>&#125; e[N];<br><br><span class="hljs-type">int</span> mx;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">return</span> x != INF <span class="hljs-keyword">and</span> x != -INF <span class="hljs-keyword">and</span> x &gt; mx;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sovle</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>tot = <span class="hljs-number">0</span>;<br>INF = <span class="hljs-number">0</span>;<br>_for(i, <span class="hljs-number">1</span>, n)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;e[i].a, &amp;e[i].b), num[++tot] = e[i].a, num[++tot] = e[i].b;<br>INF = <span class="hljs-built_in">max</span>(INF, e[i].a);<br>INF = <span class="hljs-built_in">max</span>(INF, e[i].b);<br>&#125;<br>INF++;<br>num[++tot] = -INF;<br>num[++tot] = INF;<br><span class="hljs-built_in">sort</span>(num + <span class="hljs-number">1</span>, num + <span class="hljs-number">1</span> + tot);<br>sz = <span class="hljs-built_in">unique</span>(num + <span class="hljs-number">1</span>, num + <span class="hljs-number">1</span> + tot) - num - <span class="hljs-number">1</span>;<br><span class="hljs-built_in">sort</span>(e + <span class="hljs-number">1</span>, e + n + <span class="hljs-number">1</span>);<br><span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(-INF), <span class="hljs-number">1</span>);<br><span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(INF), <span class="hljs-number">1</span>);<br>_for(i, <span class="hljs-number">1</span>, n) <span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(e[i].b), <span class="hljs-number">1</span>);<br><span class="hljs-type">int</span> res = <span class="hljs-number">1e9</span>;<br>mx = <span class="hljs-number">-1e9</span>;<br>_for(i, <span class="hljs-number">1</span>, n)<br>&#123;<br><span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(e[i].b), <span class="hljs-number">-1</span>);<br><span class="hljs-type">int</span> x = <span class="hljs-built_in">kth</span>(<span class="hljs-built_in">query</span>(<span class="hljs-built_in">pos</span>(e[i].a) - <span class="hljs-number">1</span>));<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(x))<br>res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - e[i].a));<br>x = <span class="hljs-built_in">kth</span>(<span class="hljs-built_in">query</span>(<span class="hljs-built_in">pos</span>(x)));<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(x))<br>res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - e[i].a));<br>x = <span class="hljs-built_in">kth</span>(<span class="hljs-built_in">query</span>(<span class="hljs-built_in">pos</span>(x)) + <span class="hljs-number">1</span>);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(x))<br>res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - e[i].a));<br>res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(e[i].a - mx));<br>mx = <span class="hljs-built_in">max</span>(e[i].b, mx);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, res);<br><span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(-INF), <span class="hljs-number">-1</span>);<br><span class="hljs-built_in">add</span>(<span class="hljs-built_in">pos</span>(INF), <span class="hljs-number">-1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> T = <span class="hljs-number">1</span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;T);<br><span class="hljs-keyword">while</span> (T--)<br><span class="hljs-built_in">sovle</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs python">N = <span class="hljs-built_in">int</span>(<span class="hljs-number">1e6</span> + <span class="hljs-number">5</span>)<br>tot = sz = INF = mx = <span class="hljs-number">0</span><br>vec = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>tr = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br>es = [[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(N)]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lower_bound</span>(<span class="hljs-params">l, r, x</span>):<br>    <span class="hljs-keyword">while</span> l &lt; r:<br>        mid = (l + r) &gt;&gt; <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> num[mid] &gt;= x:<br>            r = mid<br>        <span class="hljs-keyword">else</span>:<br>            l = mid + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> r<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pos</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> lower_bound(<span class="hljs-number">1</span>, sz, x)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, k</span>):<br>    <span class="hljs-keyword">while</span> x &lt;= sz:<br>        tr[x] += k<br>        x += (x &amp; -x)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query</span>(<span class="hljs-params">x</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> x:<br>        res += tr[x]<br>        x -= (x &amp; -x)<br>    <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">kth</span>(<span class="hljs-params">x</span>):<br>    res = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">25</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        res += <span class="hljs-number">1</span> &lt;&lt; i<br>        <span class="hljs-keyword">if</span> res &gt; sz <span class="hljs-keyword">or</span> tr[res] &gt;= x:<br>            res -= <span class="hljs-number">1</span> &lt;&lt; i<br>        <span class="hljs-keyword">else</span>:<br>            x -= tr[res]<br>    <span class="hljs-keyword">return</span> num[res + <span class="hljs-number">1</span>]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> x != INF <span class="hljs-keyword">and</span> x != -INF <span class="hljs-keyword">and</span> x &gt; mx<br><br><br>T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    tot = INF = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        a, b = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>        es[i] = [a, b]<br>        tot += <span class="hljs-number">1</span><br>        vec[tot] = es[i][<span class="hljs-number">0</span>]<br>        tot += <span class="hljs-number">1</span><br>        vec[tot] = es[i][<span class="hljs-number">1</span>]<br>        INF = <span class="hljs-built_in">max</span>(INF, <span class="hljs-built_in">max</span>(es[i]))<br>    INF += <span class="hljs-number">1</span><br>    tot += <span class="hljs-number">1</span><br>    vec[tot] = -INF<br>    tot += <span class="hljs-number">1</span><br>    vec[tot] = INF<br>    num = [<span class="hljs-number">0</span>] + <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(vec[<span class="hljs-number">1</span>: tot+<span class="hljs-number">1</span>])))<br>    sz = <span class="hljs-built_in">len</span>(num) - <span class="hljs-number">1</span><br>    e = <span class="hljs-built_in">sorted</span>(es[:n], key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>], reverse=<span class="hljs-literal">True</span>)<br>    add(pos(-INF), <span class="hljs-number">1</span>)<br>    add(pos(INF), <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">for</span> a, b <span class="hljs-keyword">in</span> e:<br>        add(pos(b), <span class="hljs-number">1</span>)<br>    res, mx = <span class="hljs-number">1e9</span>, -<span class="hljs-number">1e9</span><br>    <span class="hljs-keyword">for</span> a, b <span class="hljs-keyword">in</span> e:<br>        add(pos(b), -<span class="hljs-number">1</span>)<br>        x = kth(query(pos(a) - <span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">if</span> check(x):<br>            res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - a))<br>        x = kth(query(pos(a)))<br>        <span class="hljs-keyword">if</span> check(x):<br>            res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - a))<br>        x = kth(query(pos(a)) + <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> check(x):<br>            res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(x - a))<br>        res = <span class="hljs-built_in">min</span>(res, <span class="hljs-built_in">abs</span>(mx - a))<br>        mx = <span class="hljs-built_in">max</span>(b, mx)<br>    <span class="hljs-built_in">print</span>(res)<br>    add(pos(-INF), -<span class="hljs-number">1</span>)<br>    add(pos(INF), -<span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure><h2 id="E-树状数组优化dp"><a href="#E-树状数组优化dp" class="headerlink" title="E (树状数组优化dp)"></a>E (树状数组优化dp)</h2><h3 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h3><p>$~~~~$给出 $n$ 个数组，每个数组有 $k_{i}$ 个数，找到一直数组拼接方式，使得拼接后的数组 $b$ 中满足 $\forall j \in [1, i-1], b_{i} &gt; b_{j}$ （条件1）的数最多。</p><h3 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h3><p>$~~~~$考虑dp。记<br>$$<br>f[i]：前 i 个数组拼接而成的最大答案<br>$$</p><ul><li>由于一个数组中可能对答案产生贡献的只有在本数组中满足条件1的数，因此在读入时即可使数组单调递增  </li><li>将 $n$ 个数组按照最后一个元素从小到大排序，这样在更新 $f[i]$ 时，前面的状态一定已经被更新完了  </li><li>对于 $f[i]$，其中的某一个数 $a_{i, j}$，贡献来自两部分<ul><li>由于 $\forall p \in [j+1, k_{i}], a_{i, p} &gt; a_{i, j}$，因此贡献为 $k_{i}-j$</li><li>对于最大值小于 $a_{i, j}$ 的数组 $a_{s}$，其贡献为 $\max(f[s])$</li></ul></li></ul><p>$~~~~$因此，状态转移方程为<br>$$<br>f[i] &#x3D; \max(\max(f[s]) + k_{i} - j), s &#x3D; {s| \max(a_{s}) &lt; a_{i, j}}<br>$$</p><p>$~~~~$其中，$\max(f[s])$ 可用树状数组维护。</p><p>$~~~~$时间复杂度 $O(nklogn)$</p><h3 id="c-代码"><a href="#c-代码" class="headerlink" title="c++ 代码"></a>c++ 代码</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> GCC optimize(1)</span><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> GCC optimize(2)</span><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> GCC optimize(3,<span class="hljs-string">&quot;Ofast&quot;</span>,<span class="hljs-string">&quot;inline&quot;</span>)</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _for( i, L, R ) for ( int i = L; i &lt;= R; ++i )</span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lowbit</span><span class="hljs-params">( <span class="hljs-type">int</span> x )</span><br>&#123;<br><span class="hljs-keyword">return</span>(x &amp; - x);<br>&#125;<br><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span>N = <span class="hljs-number">2e5</span> + <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span>n, tr[N], f[N], mxv;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span> &#123;</span><br>public:<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; v;<br><span class="hljs-type">bool</span> operator&lt;( <span class="hljs-type">const</span> Node &amp; o ) <span class="hljs-type">const</span><br>&#123;<br><span class="hljs-keyword">return</span>(v.back() &lt; o.v.back() );<br>&#125;<br>&#125; a[N];<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">modify</span><span class="hljs-params">( <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y )</span><br>&#123;<br><span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> i = x; i &lt;= mxv; i += lowbit( i ) )<br>tr[i] = max( tr[i], y );<br>&#125;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">( <span class="hljs-type">int</span> x )</span><br>&#123;<br><span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> i = x; i; i -= lowbit( i ) )<br>res = max( res, tr[i] );<br><span class="hljs-keyword">return</span>(res);<br>&#125;<br><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">( <span class="hljs-type">int</span> x )</span><br>&#123;<br><span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> i = x; i &lt;= mxv; i += lowbit( i ) )<br>tr[i] = <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">solve</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;n );<br>mxv = <span class="hljs-number">0</span>;<br>_for( i, <span class="hljs-number">1</span>, n )<br>&#123;<br><span class="hljs-type">int</span> m;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;m );<br><span class="hljs-keyword">while</span> ( m-- )<br>&#123;<br><span class="hljs-type">int</span> x;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;x );<br><span class="hljs-keyword">if</span> ( a[i].v.empty() or a[i].v.back() &lt; x )<br>a[i].v.push_back( x ), mxv = max( mxv, x );<br>&#125;<br>&#125;<br>sort( a + <span class="hljs-number">1</span>, a + <span class="hljs-number">1</span> + n );<br><span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>_for( i, <span class="hljs-number">1</span>, n )<br>&#123;<br><span class="hljs-type">int</span> k = a[i].v.size(), cnt = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> ( <span class="hljs-type">int</span> j = k - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; --j )<br>&#123;<br>cnt++;<br>f[i] = max( f[i], cnt + query( a[i].v[j] - <span class="hljs-number">1</span> ) );<br>&#125;<br>modify( a[i].v.back(), f[i] );<br>res = max( res, f[i] );<br>&#125;<br>_for( i, <span class="hljs-number">1</span>, n ) clear( a[i].v.back() ), a[i].v.clear(), f[i] = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">printf</span>( <span class="hljs-string">&quot;%d\n&quot;</span>, res );<br>&#125;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">int</span> T = <span class="hljs-number">1</span>;<br><span class="hljs-built_in">scanf</span>( <span class="hljs-string">&quot;%d&quot;</span>, &amp;T );<br><span class="hljs-keyword">while</span> ( T-- )<br>solve();<br><span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>codeforce, cf, C, D, E, Maximum Subarray, dp, DP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Educational Codeforces Round 144 (Rated for Div. 2) D. Maximum Subarray (Dp)</title>
    <link href="/2023/03/12/cf_1796_D/"/>
    <url>/2023/03/12/cf_1796_D/</url>
    
    <content type="html"><![CDATA[<p>D (dp)</p><span id="more"></span><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p><a href="https://codeforces.com/contest/1796/problem/D">https://codeforces.com/contest/1796/problem/D</a></p><h1 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h1><p>$~~~~$给一个数组 $a$，要求选出 $a$ 的一个长度为 $k$ 的子序列 $b_{1}, b_{2}, …, b_{k}$，让 $\forall i<br>\in [1, k], b_{i} +&#x3D; x$，而让 $\forall a_{i} \in a \ and \ a_{i} \notin b, a_{i} -&#x3D; x$，使得形成的新数组最大子段和最大。</p><h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><p>$~~~~$考虑 DP。  </p><p>$~~~~$设 $f[i][j]$ : 考虑前 $i$ 个数，已经选择了 $j$ 个数执行 “$+x$” 操作的大子段和。</p><p>$~~~~$分类讨论：  </p><ul><li>$a[i]$ 不执行 “$+x$” 操作   <ul><li>必须满足 $i &gt; j$，因为如果 $i&#x3D;j$ 则意味着前 $i$ 个数全部执行了 “$+x$” 操作，因此 $a[i]$ 必须执行 “$+x$” 操作  </li><li>$a[i]$ 必须执行 “$-x$” 操作</li><li>$a[i]$ 单独作为一个子段和，即 $a[i] - x$</li><li>$a[i]$ 合并到 $[1, i-1]$ 的最大子段和中，即 $f[i-1, j] + a[i] - x$</li></ul></li><li>$a[i]$ 执行 “$+x$” 操作<ul><li>$a[i]$ 单独作为一个子段和，即 $a[i] + x$</li><li>$a[i]$ 合并到 $[1, i-1]$ 的最大子段和中，即 $f[i-1, j-1] + a[i] + x$</li></ul></li></ul><p>$~~~~$因此，状态转移方程为：<br>$$<br>f[i,j]&#x3D;\left{\begin{matrix}max(a[i]-x,f[i-1,j]+a[i]-x)\ \ j&lt;i<br> \max(a[i]+x, f[i-1, j-1]+a[i]+x)\ \ j &gt; 0<br>\end{matrix}\right.<br>$$</p><p>$~~~~$初始条件为：$f[0, 0] &#x3D; 0$</p><h1 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n, k, x = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    a = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    inf = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)<br>    f = [[-inf <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k+<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>    res = <span class="hljs-number">0</span><br>    f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n+<span class="hljs-number">1</span>):<br>        <span class="hljs-comment"># 当前已经使用的 &quot;+x&quot; 操作 j 最少为 k-(n-i)，即让 i 后面的数全部执行 &quot;+x&quot; 操作</span><br>        <span class="hljs-comment"># 当前已经使用的 &quot;+x&quot; 操作 j 最多为 i，即让 i 前面的数全部执行 &quot;+x&quot; 操作</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, k-(n-i)), <span class="hljs-built_in">min</span>(i, k)+<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> j &lt; i:<br>                f[i][j] = <span class="hljs-built_in">max</span>(a[i-<span class="hljs-number">1</span>] - x, f[i-<span class="hljs-number">1</span>][j] + a[i-<span class="hljs-number">1</span>] - x)<br>            <span class="hljs-keyword">if</span> j:<br>                <span class="hljs-comment"># 注意此处 f[i][j] 可能已经被更新，因此要带上</span><br>                f[i][j] = <span class="hljs-built_in">max</span>(f[i][j], <span class="hljs-built_in">max</span>(a[i-<span class="hljs-number">1</span>] + x, f[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>] + a[i-<span class="hljs-number">1</span>] + x))<br>            <span class="hljs-comment"># 若只考虑当前的最大子段和，其他的 &quot;+x&quot; 操作发生在什么地方对当前结果没有影响</span><br>            res = <span class="hljs-built_in">max</span>(res, f[i][j])<br>    <span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>codeforce, cf, D, Maximum Subarray, dp, DP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Codeforces Round 856 (Div. 2) a - D</title>
    <link href="/2023/03/11/cf_1794/"/>
    <url>/2023/03/11/cf_1794/</url>
    
    <content type="html"><![CDATA[<p>A (思维) B (思维) C (思维) D (dp) </p><span id="more"></span><h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p><a href="https://codeforces.com/contest/1794">https://codeforces.com/contest/1794</a></p><h1 id="A-思维"><a href="#A-思维" class="headerlink" title="A (思维)"></a>A (思维)</h1><h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>$~~~~$给出一个字符串 $s$ 的所有子串 $s_{sub}$ 的随机排列，判断这个字符串 $s$ 是否为回文串</p><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>$~~~~$找出两个长度最长的子串 $s_{sub, max_{1}}$、$s_{sub, max_{2}}$，假设 $s_{sub, max_{1}}$ 是 $s$ 的前缀，$s_{sub, max_{2}}$是 $s$ 的后缀，则<br>$$<br>s &#x3D; s_{sub, max_{1}}[:] + s_{sub, max_{2}}[-1] \ \ or \  \ s_{sub, max_{1}}[0] + s_{sub, max_{2}}[:]<br>$$</p><p>$~~~~$枚举两者情况即可求得 $s$，最后判断 $s$ 是否为回文串即可。</p><h2 id="python-代码"><a href="#python-代码" class="headerlink" title="python 代码"></a>python 代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    s = <span class="hljs-built_in">input</span>().split()<br>    <span class="hljs-keyword">if</span> n == <span class="hljs-number">2</span>:<br>        res = s[<span class="hljs-number">0</span>] + s[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">else</span>:<br>        mxs = []<br>        <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(c) == n-<span class="hljs-number">1</span>:<br>                mxs.append(c)<br>        <span class="hljs-comment"># print(mxs[0][:n-2], mxs[1][1:])</span><br>        <span class="hljs-keyword">if</span> mxs[<span class="hljs-number">0</span>][:n-<span class="hljs-number">2</span>] == mxs[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>:]:<br>            res = mxs[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + mxs[<span class="hljs-number">0</span>]<br>        <span class="hljs-keyword">else</span>:<br>            res = mxs[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + mxs[<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">if</span> res == res[::-<span class="hljs-number">1</span>]:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;YES&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;NO&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="B-思维"><a href="#B-思维" class="headerlink" title="B (思维)"></a>B (思维)</h1><h2 id="题意-1"><a href="#题意-1" class="headerlink" title="题意"></a>题意</h2><p>$~~~~$给一个数组 $a$，每一次操作可以让 $a_{i}&#x3D;a_{i}+1$，最多操作 $n$ 次，要求最后使得 $a$ 满足<br>$$<br>\forall i \in [1, n-1], a_{i} \ not\  \mid a_{i+1}<br>$$</p><h2 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h2><p>$~~~~$贪心即可。 </p><p>$~~~~$从前往后遍历，只要 $a_{i-1} \mid a_{i}$，因为 $a_{i-1}+1$ 可能是 $a_{i}$ 的因子，而 $a_{i-1}$ 不可能是 $a_{i}+1$ 的因子，因此就让 $a_{i} +&#x3D; 1$。 </p><p>$~~~~$注意，当 $a_{i-1}&#x3D;1$ 时，恒有 $a_{i-1} | (a_{i}+1)$，因此如果 $\exists k \in [1, n], a_{k}&#x3D;1$，则使 $a_{k} +&#x3D; 1$。</p><h2 id="python-代码-1"><a href="#python-代码-1" class="headerlink" title="python 代码"></a>python 代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    <span class="hljs-keyword">if</span> <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> a:<br>        a = [_ + <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> a]<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        <span class="hljs-keyword">if</span> a[i] % a[i-<span class="hljs-number">1</span>] == <span class="hljs-number">0</span>:<br>            a[i] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> a:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d &#x27;</span> % x, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h1 id="C-思维"><a href="#C-思维" class="headerlink" title="C (思维)"></a>C (思维)</h1><h2 id="题意-2"><a href="#题意-2" class="headerlink" title="题意"></a>题意</h2><p>$~~~~$给一个单调非减数组 $a$，$\forall i \in [1, n]$，在 $a_{j}, j \in [1, i]$ 中选出一个子序列 $s_{1}, s_{2}, …, s_{d}$，要使 $maxsocre_{i} &#x3D; \frac{s_{1}<em>s_{2}</em>…*s_{d}}{d!} $，输出 $score_{i}$。</p><h2 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h2><p>$~~~~$注意到，$a$ 是一个单调非减的序列，且对于 $score &#x3D; \frac{s_{1}<em>s_{2}</em>…*s_{d}}{d!}$，如果想要加入一个数 $s_{d+1}$，则 $socre *&#x3D; \frac{s_{d+1}}{d+1}$。 </p><p>$~~~~$因此对于某一个前缀 $a_{j}, j \in [1, i]$，我们可以这样让 $score$ 最大化：</p><ul><li>$score &#x3D; a_{j}$ </li><li>$if a_{j-1}&#x2F;2 &gt; 1，则score &#x3D; \frac{a_{j} * a_{j-1}}{2}$ </li><li>依次类推</li></ul><p>$~~~~$因此，我们可以从前往后扫，用一个队列来维护 $score$ 的最大值，每次只需要判断队列前面的是否需要删除即可。</p><h2 id="python-代码-2"><a href="#python-代码-2" class="headerlink" title="python 代码"></a>python 代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">T = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(T):<br>    n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    a = [<span class="hljs-built_in">int</span>(_) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">input</span>().split()]<br>    res, l, r = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span><br>    que = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n+<span class="hljs-number">1</span>)]<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> a:<br>        r += <span class="hljs-number">1</span><br>        que[r] = x<br>        res += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> que[l] &lt; res <span class="hljs-keyword">and</span> l &lt; r:<br>            l += <span class="hljs-number">1</span><br>            res -= <span class="hljs-number">1</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d &#x27;</span> % res, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h1 id="D-dp"><a href="#D-dp" class="headerlink" title="D (dp)"></a>D (dp)</h1><h2 id="题意-3"><a href="#题意-3" class="headerlink" title="题意"></a>题意</h2><p>$~~~~$给出一个长度为 $2n$ 的数组 $a$，$a$ 的某一个排列是某一个数的质因数分解，即<br>$$<br>f(m) &#x3D; {p_{1}, e_{1}, p_{2}, e_{2}, …, p_{k}, e_{k}}<br>$$</p><p>$~~~~$求有多少个这样的数，模 $998244353$。</p><h2 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h2><p>$~~~~$首先考虑特殊情况，当 $a$ 中的素数数量 $&lt;n$ 时，答案显然为 $0$。</p><p>$~~~~$注意到，当选定 $n$ 个数为底数时，剩下的 $n$ 个数做全排列。设 $a$ 去重后为 $b$，由多重集全排列理论可知，全排列数为<br>$$<br>\frac{n!}{cnt_{b_{1}}! * cnt_{b_{2}}! * .. cnt_{b_{m}}!}<br>$$</p><p>$~~~~$其中 $cnt_{b_{k}}$ 是 $b_{k}$ 的数量。</p><p>$~~~~$当 $b_{k}$ 为非素数时，贡献是固定的，因为它们都不能作为底数。而当 $b_{k}$ 为素数时，贡献是不固定的，因为当它们作为底数时，贡献为 $\frac{1}{(cnt_{b_{k}}-1)!}$，而这个部分可以用 $dp$ 来求。</p><p>$~~~~$设 $f_{i, j}$ 为处理到第 $i$ 种数，以 $j$ 个数作为底数时的贡献。考虑如何从 $f_{i-1}$ 转移：</p><ul><li>当第 $i$ 种数不作为底数时，则 $f_{i,j} &#x3D; \frac{f_{i-1, j}}{cnt_{b_{i}}!} $，因为前后的底数数量 $j$ 是一样的</li><li>当第 $i$ 种数作为底数时，则 $f_{i,j} &#x3D; \frac{f_{i-1,j-1}}{(cnt_{b_{i}}-1)!}$，因为当前比上一次多一个底数<br>$f_{m, n}$ 即为素数的贡献，其中 $m$ 是数的种类。</li></ul><p>$~~~~$最后，设 $b$ 中的非素数部分为 $c$，则<br>$$res &#x3D; \frac{n}{cnt_{c_{1}}! * cnt_{c_{2}}! *…} * f_{m, n}<br>$$</p><h2 id="c-代码"><a href="#c-代码" class="headerlink" title="c++ 代码"></a>c++ 代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">qmi</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(b) &#123;<br>        <span class="hljs-keyword">if</span>(b &amp; <span class="hljs-number">1</span>) res = res * a % mod;<br>        a = a * a % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;n);<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">2</span> * n)</span></span>;<br>    <span class="hljs-type">int</span> mx = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span> * n; i++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;a[i]);<br>        mx = <span class="hljs-built_in">max</span>(mx, a[i]);<br>    &#125;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">primes</span><span class="hljs-params">(mx + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">not_prime</span><span class="hljs-params">(mx + <span class="hljs-number">1</span>)</span></span>;<br>    not_prime[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> cnt_primes = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= mx; i++) &#123;<br>        <span class="hljs-keyword">if</span>(!not_prime[i]) primes[++cnt_primes] = i;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= cnt_primes <span class="hljs-keyword">and</span> i * primes[j] &lt;= mx; j++) &#123;<br>            not_prime[i * primes[j]] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span>(i % primes[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">fac</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, <span class="hljs-title">inv</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    fac[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) fac[i] = fac[i - <span class="hljs-number">1</span>] * i % mod;<br>    inv[<span class="hljs-number">0</span>] = inv[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) inv[i] = <span class="hljs-built_in">qmi</span>(fac[i], mod - <span class="hljs-number">2</span>);<br>    vector&lt;<span class="hljs-type">int</span>&gt; p, np;<br>    map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; cnt;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span> * n; i++) &#123;<br>        cnt[a[i]]++;<br>        <span class="hljs-keyword">if</span>(cnt[a[i]] == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">if</span>(not_prime[a[i]]) np.<span class="hljs-built_in">push_back</span>(a[i]);<br>            <span class="hljs-keyword">else</span> p.<span class="hljs-built_in">push_back</span>(a[i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(p.<span class="hljs-built_in">size</span>() &lt; n) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;0\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> res = fac[n];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; np.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        res = (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)res * inv[cnt[np[i]]] % mod;<br>    &#125;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">f</span>(p.<span class="hljs-built_in">size</span>() + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>));<br>    f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= p.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        f[i][<span class="hljs-number">0</span>] = (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] * inv[cnt[p[i - <span class="hljs-number">1</span>]]] % mod;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n &amp;&amp; j &lt;= i; j++) &#123;<br>            f[i][j] = ((<span class="hljs-type">long</span> <span class="hljs-type">long</span>)f[i - <span class="hljs-number">1</span>][j] * inv[cnt[p[i - <span class="hljs-number">1</span>]]] % mod + (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] * inv[cnt[p[i - <span class="hljs-number">1</span>]] - <span class="hljs-number">1</span>] % mod) % mod;<br>        &#125;<br>    &#125;<br>    res = (<span class="hljs-type">long</span> <span class="hljs-type">long</span>)res * f[p.<span class="hljs-built_in">size</span>()][n] % mod;<br> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, res);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>codeforce, Codeforces Round 856 (Div. 2) A - D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用 Hexo 配置博客</title>
    <link href="/2023/03/09/%E4%BD%BF%E7%94%A8hexo%E9%85%8D%E7%BD%AE%E5%8D%9A%E5%AE%A2/"/>
    <url>/2023/03/09/%E4%BD%BF%E7%94%A8hexo%E9%85%8D%E7%BD%AE%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h1><p><code>npm install -g hexo-cli</code></p><h1 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h1><p>查看默认安装路径 <code>npm config ls</code>，找到 <code>hexo-cli/bin</code>文件夹，将其添加到环境变量中  </p><h1 id="创建新文件夹"><a href="#创建新文件夹" class="headerlink" title="创建新文件夹"></a>创建新文件夹</h1><p><code>mkdir blog</code></p><h1 id="生成初始化文件"><a href="#生成初始化文件" class="headerlink" title="生成初始化文件"></a>生成初始化文件</h1><p><code>hexo init</code></p><h1 id="下载部署插件"><a href="#下载部署插件" class="headerlink" title="下载部署插件"></a>下载部署插件</h1><p><code>npm install hexo-deployer-git --save</code></p><!-- # <code>hexo g</code># 棰勮<code>hexo s</code># 閮ㄧ讲<code>hexo d</code> -->]]></content>
    
    
    
    <tags>
      
      <tag>hexo, blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
